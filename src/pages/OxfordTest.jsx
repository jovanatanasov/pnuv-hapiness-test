import React, { useState } from 'react';

const questions = [
  "–ù–µ —Å—É–º –æ—Å–æ–±–µ–Ω–æ –∑–∞–¥–æ–≤–æ–ª–µ–Ω –æ–¥ —Ç–æ–∞ –∫–∞–∫–æ–≤/–∫–∞–∫–≤–∞ —Å—É–º.",
  "–ú–Ω–æ–≥—É —Å–µ –∏–Ω—Ç–µ—Ä–µ—Å–∏—Ä–∞–º –∑–∞ –¥—Ä—É–≥–∏—Ç–µ –ª—É—ì–µ.",
  "–ß—É–≤—Å—Ç–≤—É–≤–∞–º –¥–µ–∫–∞ –∂–∏–≤–æ—Ç–æ—Ç –º–Ω–æ–≥—É –Ω–∞–≥—Ä–∞–¥—É–≤–∞.",
  "–ò–º–∞–º –º–Ω–æ–≥—É —Ç–æ–ø–ª–∏ —á—É–≤—Å—Ç–≤–∞ –∫–æ–Ω —Ä–µ—á–∏—Å–∏ —Å–∏—Ç–µ.",
  "–†–µ—Ç–∫–æ —Å–µ –±—É–¥–∞–º –æ–¥–º–æ—Ä–µ–Ω/–æ–¥–º–æ—Ä–µ–Ω–∞.",
  "–ù–µ —Å—É–º –æ—Å–æ–±–µ–Ω–æ –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ–Ω/–æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–∞ –∑–∞ –∏–¥–Ω–∏–Ω–∞—Ç–∞.",
  "–ü–æ–≤–µ—ú–µ—Ç–æ —Ä–∞–±–æ—Ç–∏ –º–∏ —Å–µ –∑–∞–±–∞–≤–Ω–∏.",
  "–°–µ–∫–æ–≥–∞—à —Å—É–º –ø–æ—Å–≤–µ—Ç–µ–Ω/–∞ –∏ –≤–∫–ª—É—á–µ–Ω/–∞.",
  "–ñ–∏–≤–æ—Ç–æ—Ç –µ –¥–æ–±–∞—Ä.",
  "–ù–µ –º–∏—Å–ª–∞–º –¥–µ–∫–∞ —Å–≤–µ—Ç–æ—Ç –µ –¥–æ–±—Ä–æ –º–µ—Å—Ç–æ.",
  "–ú–Ω–æ–≥—É —á–µ—Å—Ç–æ —Å–µ —Å–º–µ–∞–º.",
  "–ó–∞–¥–æ–≤–æ–ª–µ–Ω/–Ω–∞ —Å—É–º –æ–¥ —Å√® –≤–æ –º–æ—ò–æ—Ç –∂–∏–≤–æ—Ç.",
  "–ù–µ –º–∏—Å–ª–∞–º –¥–µ–∫–∞ –∏–∑–≥–ª–µ–¥–∞–º –ø—Ä–∏–≤–ª–µ—á–Ω–æ.",
  "–ü–æ—Å—Ç–æ–∏ —Ä–∞–∑–ª–∏–∫–∞ –ø–æ–º–µ—ì—É —Ç–æ–∞ —à—Ç–æ —Å–∞–∫–∞–º –¥–∞ –≥–æ –Ω–∞–ø—Ä–∞–≤–∞–º –∏ —Ç–æ–∞ —à—Ç–æ —Å—É–º –≥–æ –Ω–∞–ø—Ä–∞–≤–∏–ª/–∞.",
  "–ú–Ω–æ–≥—É —Å—É–º —Å—Ä–µ—ú–µ–Ω/—Å—Ä–µ—ú–Ω–∞.",
  "–ù–∞–æ—ì–∞–º —É–±–∞–≤–∏–Ω–∞ –≤–æ –º–Ω–æ–≥—É –Ω–µ—à—Ç–∞.",
  "–°–µ–∫–æ–≥–∞—à –∏–º–∞–º –ø–æ–∑–∏—Ç–∏–≤–Ω–æ –≤–ª–∏—ò–∞–Ω–∏–µ –≤—Ä–∑ –¥—Ä—É–≥–∏—Ç–µ.",
  "–£—Å–ø–µ–≤–∞–º –¥–∞ –≤–∫–ª–æ–ø–∞–º —Å√® —à—Ç–æ —Å–∞–∫–∞–º –≤–æ —Å–µ–∫–æ—ò–¥–Ω–µ–≤–∏–µ—Ç–æ.",
  "–ù–µ —á—É–≤—Å—Ç–≤—É–≤–∞–º –¥–µ–∫–∞ —Å—É–º –ø–æ—Å–µ–±–Ω–æ –≤–æ –∫–æ–Ω—Ç—Ä–æ–ª–∞ –Ω–∞ —Å–≤–æ—ò–æ—Ç –∂–∏–≤–æ—Ç.",
  "–ß—É–≤—Å—Ç–≤—É–≤–∞–º –¥–µ–∫–∞ –º–æ–∂–∞–º –¥–∞ —Å–µ —Å–ø—Ä–∞–≤–∞–º —Å–æ —Å√®.",
  "–¶–µ–ª–æ—Å–Ω–æ —Å—É–º –º–µ–Ω—Ç–∞–ª–Ω–æ –ø—Ä–∏—Å—É—Ç–µ–Ω/–ø—Ä–∏—Å—É—Ç–Ω–∞.",
  "–ß–µ—Å—Ç–æ –¥–æ–∂–∏–≤—É–≤–∞–º —Ä–∞–¥–æ—Å—Ç –∏ –≤–æ–æ–¥—É—à–µ–≤—É–≤–∞—ö–µ.",
  "–¢–µ—à–∫–æ –º–∏ –µ –¥–∞ –Ω–æ—Å–∞–º –æ–¥–ª—É–∫–∏.",
  "–ù–µ–º–∞–º –ø–æ—Å–µ–±–Ω–æ —á—É–≤—Å—Ç–≤–æ –∑–∞ —Ü–µ–ª –∏ –∑–Ω–∞—á–µ—ö–µ –≤–æ –∂–∏–≤–æ—Ç–æ—Ç.",
  "–ò–º–∞–º –º–Ω–æ–≥—É –µ–Ω–µ—Ä–≥–∏—ò–∞.",
  "–û–±–∏—á–Ω–æ –∏–º–∞–º –ø–æ–∑–∏—Ç–∏–≤–Ω–æ –≤–ª–∏—ò–∞–Ω–∏–µ –≤—Ä–∑ –Ω–∞—Å—Ç–∞–Ω–∏—Ç–µ.",
  "–ù–µ —Å–µ –∑–∞–±–∞–≤—É–≤–∞–º —Å–æ –¥—Ä—É–≥–∏—Ç–µ –ª—É—ì–µ.",
  "–ù–µ —Å–µ —á—É–≤—Å—Ç–≤—É–≤–∞–º –æ—Å–æ–±–µ–Ω–æ –∑–¥—Ä–∞–≤–æ.",
  "–ù–µ–º–∞–º –º–Ω–æ–≥—É —Å—Ä–µ—ú–Ω–∏ —Å–ø–æ–º–µ–Ω–∏ –æ–¥ –º–∏–Ω–∞—Ç–æ—Ç–æ."
];

const scale = [
  "1 - –í–æ–æ–ø—à—Ç–æ –Ω–µ —Å–µ —Å–æ–≥–ª–∞—Å—É–≤–∞–º",
  "2 - –ù–µ —Å–µ —Å–æ–≥–ª–∞—Å—É–≤–∞–º",
  "3 - –î–µ–ª—É–º–Ω–æ –Ω–µ —Å–µ —Å–æ–≥–ª–∞—Å—É–≤–∞–º",
  "4 - –î–µ–ª—É–º–Ω–æ —Å–µ —Å–æ–≥–ª–∞—Å—É–≤–∞–º",
  "5 - –°–µ —Å–æ–≥–ª–∞—Å—É–≤–∞–º",
  "6 - –¶–µ–ª–æ—Å–Ω–æ —Å–µ —Å–æ–≥–ª–∞—Å—É–≤–∞–º"
];


const reverseScored = [0, 4, 5, 9, 12, 13, 18, 22, 23, 26, 27, 28];

export default function OxfordTest() {
  const [answers, setAnswers] = useState(Array(questions.length).fill(null));
  const [result, setResult] = useState(null);
  const [error, setError] = useState('');

  const handleChange = (index, value) => {
    const newAnswers = [...answers];
    newAnswers[index] = parseInt(value);
    setAnswers(newAnswers);
  };

  const handleSubmit = (e) => {
    e.preventDefault();

    if (answers.includes(null)) {
      setError('–í–µ –º–æ–ª–∏–º–µ –æ–¥–≥–æ–≤–æ—Ä–µ—Ç–µ –Ω–∞ —Å–∏—Ç–µ –ø—Ä–∞—à–∞—ö–∞.');
      setResult(null);
      return;
    }


    const total = answers.reduce((acc, val, idx) => {
      const adjusted = reverseScored.includes(idx) ? 7 - val : val;
      return acc + adjusted;
    }, 0);

    const average = (total / questions.length).toFixed(2);
    setError('');
    setResult(average);
  };

  const interpret = (avg) => {
    const score = parseFloat(avg);
    if (score >= 5.0) return "üéâ –ò—Å–∫–ª—É—á–∏—Ç–µ–ª–Ω–æ –≤–∏—Å–æ–∫–æ –Ω–∏–≤–æ –Ω–∞ —Å—Ä–µ—ú–∞";
    if (score >= 4.0) return "üôÇ –í–∏—Å–æ–∫–æ –Ω–∏–≤–æ –Ω–∞ —Å—Ä–µ—ú–∞";
    if (score >= 3.0) return "üòê –ü—Ä–æ—Å–µ—á–Ω–æ –Ω–∏–≤–æ –Ω–∞ —Å—Ä–µ—ú–∞";
    if (score >= 2.0) return "üòü –ù–∏—Å–∫–æ –Ω–∏–≤–æ –Ω–∞ —Å—Ä–µ—ú–∞";
    return "‚òπÔ∏è –ú–Ω–æ–≥—É –Ω–∏—Å–∫–æ –Ω–∏–≤–æ –Ω–∞ —Å—Ä–µ—ú–∞";
  };

  return (
    <div className="min-h-screen bg-white p-6 flex flex-col items-center">
      <h1 className="text-3xl font-bold mb-6 text-center">–û–∫—Å—Ñ–æ—Ä–¥—Å–∫–∏ –ø—Ä–∞—à–∞–ª–Ω–∏–∫ –∑–∞ –Ω–∏–≤–æ –Ω–∞ —Å—Ä–µ—ú–∞</h1>
      <p className="text-lg text-gray-600 mb-8 max-w-2xl text-center">
        –û–¥–≥–æ–≤–æ—Ä–∏ –Ω–∞ —Å–µ–∫–æ–µ –ø—Ä–∞—à–∞—ö–µ —Å–ø–æ—Ä–µ–¥ —Ç–æ–∞ –∫–æ–ª–∫—É —Å–µ —Å–æ–≥–ª–∞—Å—É–≤–∞—à —Å–æ –¥–∞–¥–µ–Ω–∞—Ç–∞ –∏–∑—ò–∞–≤–∞.
      </p>

      <form onSubmit={handleSubmit} className="w-full max-w-4xl space-y-8">
        {questions.map((q, idx) => (
          <div key={idx} className="border-b pb-6">
            <p className="mb-2 font-medium">{idx + 1}. {q}</p>
            <div className="grid grid-cols-2 sm:grid-cols-3 gap-2">
              {scale.map((label, i) => (
                <label key={i} className="flex items-center space-x-2">
                  <input
                    type="radio"
                    name={`q${idx}`}
                    value={i + 1}
                    checked={answers[idx] === i + 1}
                    onChange={(e) => handleChange(idx, e.target.value)}
                    className="accent-blue-600"
                  />
                  <span className="text-sm">{label}</span>
                </label>
              ))}
            </div>
          </div>
        ))}

        <div className="text-center">
          {error && <p className="text-red-600 mb-4">{error}</p>}
          <button
            type="submit"
            className="bg-blue-600 text-white font-semibold px-6 py-3 rounded hover:bg-blue-700"
          >
            –ü–æ–¥–Ω–µ—Å–∏
          </button>

          {result && (
  <div className="mt-6 text-lg text-center">
    <p>üßÆ –¢–≤–æ—ò–∞—Ç–∞ –ø—Ä–æ—Å–µ—á–Ω–∞ –æ—Ü–µ–Ω–∫–∞ –µ: <strong>{result}</strong></p>
    <p className="mt-2">{interpret(result)}</p>

    <p className="mt-4 text-sm text-gray-500 max-w-xl mx-auto italic">
      *–û–≤–æ—ò —Ç–µ—Å—Ç —Å–ª—É–∂–∏ —Å–∞–º–æ –∑–∞ –ª–∏—á–Ω–∞ —Ä–µ—Ñ–ª–µ–∫—Å–∏—ò–∞ –∏ –Ω–µ –ø—Ä–µ—Ç—Å—Ç–∞–≤—É–≤–∞ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∞ –¥–∏—ò–∞–≥–Ω–æ–∑–∞. 
      –î–æ–∫–æ–ª–∫—É —á—É–≤—Å—Ç–≤—É–≤–∞—à –ø–æ—Ç—Ä–µ–±–∞, —Å–µ–∫–æ–≥–∞—à –µ –¥–æ–±—Ä–æ –¥–∞ —Ä–∞–∑–≥–æ–≤–∞—Ä–∞—à —Å–æ —Å—Ç—Ä—É—á–Ω–æ –ª–∏—Ü–µ –∏–ª–∏ –Ω–µ–∫–æ—ò –∫–æ–º—É –º—É –≤–µ—Ä—É–≤–∞—à.*
    </p>
  </div>
)}
        </div>
      </form>
    </div>
  );
}
